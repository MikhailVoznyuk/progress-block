# Прототип блока Progress для моб. приложений
## Реализованная функциональность 
- Блок Progress показывает прогресс от 0 до 100 в виде частично заполненный дуги окружности. Поддерживает состояния hidden и animating. Анимация реализована в виде движения дуги по часовой стрелке с сохранением текущего прогресса. 
-  Поле для ввода позволяет ввести текущее состояние прогресса, а переключатели Animate / Hide анимировать и скрыть блок Progress соответсвенно. 
- Верстка поддерживает landscape и portrait ориентацию. 

## Стек
- HTML / CSS
- JavaScript (ES Modules)

## Запуск
- [GitHub Pages](https://mikhailvoznyuk.github.io/progress-block/)
- Локально путем открытия файла index.html (сборщик не нужен).

## Особенности и edge кейсы
- По причине невозможности использовать TypeScript, повсеместно используется явное приведение и проверка типов. 
- Для десктопа не вносятся никакие изменения в верстку. Приложение просто выравнивается по центру экрана. 
- Учтены попытки внести некорректное значение в поле для ввода прогресса. Если не удается спарсить значение как число - в state.progress устанавливается значение 0. Дробные значения игнорируются.
- Плавное изменения размеров дуги прогресса реализовано путем регистрации свойства (--p) через '@property'. 
- Компонент Progress принимает опциональные пропсы size и stoke, задающие размер блока и ширину дуги. Но их указание сбивает стандартную адаптивную верстку. 

## Составляющие приложения 

- index.html - базовая конфигурация документа с указанием корня приложения и подключением entrypoint'а.
- index.js - входная точка в приложение. Импортирует App и вызывает его с передачей корневого узла.
- app.js - основное веб приложение. Собирает layout, маунтит компоненты, хранит текущее состояние и при изменении вызывает сеттеры состояния компонента Progress. 
- components/progress.js - блок прогресса. Принимает значения progress, animating и hidden. Реализует отображение текущего прогресса в виде чистично заполненной дуги, поддерживает анимацию и скрытие. Независим от других и не использует внутри какие-либо внешние состояния. Управление производится исключительно через его методы. 
- components/InputField.js - поле для ввода значения числового типа. Используется для ввода текущего прогресса
- components/ToggleButton.js - переключатель логического состояния в виде переключателя. Используется для изменения состояний animated / hidden.
- index.css - единый файл стилей.
- shared/utils/crateEl.js - утилитарная функция для более быстрого создаения DOM элементов (в рамках задачи), написана для уменьшения boilerplate. 
- shared/utils/clampPercent.js - утилитарная фукнция для отбрасывания значений ввода за пределами [0, 100].

## Детали реализизации
- Практически все приложение реализовано внутри JS с использованием компонентного подхода. В index.html указан только корень, куда монтируется приложение. 
- Компоненты App и Progress реализованы в виде классов ввиду необходимости поддержки внутреннего состояния, примитивного жизненного цикла и публичного API. Контроллы реализованы как функции. Тем не менее все компоненты имеют схожий контракт: сеттеры состояния, геттеры (опционально), mount, destroy.
- Контроллы реализованы как управляемые компоненты с единственным источником истины в App. При изменении они вызывают callbacks, App валидирует / нормализует новое значение (в т.ч. для state.progress) и сохраняет его в состоянии. Затем выполняется синхронизация контроллов через sync: App вызывает сеттеры ToggleButton и InputField, передавая актуальные значения из state.
- Дуга реализована через conic-gradient. Размер определяется переменной --p, которая задается внутри Progress. Верстка блока производилась в три слоя: нижний div - незаполненная часть дуги. Средний блок с коническим углом перекрывает нижний, давая показывая заполненную дугу, и верхний блокой центрирован по средине с небольшим отступом = stroke, перекрывает все до stroke имитируя пустое пространство по центру.




